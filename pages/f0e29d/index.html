<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>how-to-ensure-the-order-of-messages | 時念</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vdoingBlog/img/csdn.ico">
    <link rel="stylesheet" href="/vdoingBlog/icon/iconfont.css">
    <meta name="description" content="在努力一点，成为更优秀的人">
    <meta name="keywords" content="全栈博客,个人技术博客,前端,后端开发,后端框架,技术文档,学习,面试,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/vdoingBlog/assets/css/0.styles.1a8a0045.css" as="style"><link rel="preload" href="/vdoingBlog/assets/js/app.b9445f3d.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/2.6f6622d0.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/3.2637abc7.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/8.a941c0a5.js" as="script"><link rel="prefetch" href="/vdoingBlog/assets/js/10.f47bb344.js"><link rel="prefetch" href="/vdoingBlog/assets/js/100.42845136.js"><link rel="prefetch" href="/vdoingBlog/assets/js/101.f4fa1fb3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/102.3b223ea5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/103.2feef0d7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/104.d8c00bff.js"><link rel="prefetch" href="/vdoingBlog/assets/js/105.20cd0607.js"><link rel="prefetch" href="/vdoingBlog/assets/js/106.001d93be.js"><link rel="prefetch" href="/vdoingBlog/assets/js/107.b8d7babc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/108.910bf8f7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/109.78853843.js"><link rel="prefetch" href="/vdoingBlog/assets/js/11.aa074a37.js"><link rel="prefetch" href="/vdoingBlog/assets/js/110.d242bfec.js"><link rel="prefetch" href="/vdoingBlog/assets/js/111.6a5c9de7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/112.d252eeeb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/113.d9f0ce34.js"><link rel="prefetch" href="/vdoingBlog/assets/js/114.fe4b6af6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/115.e4a474d2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/116.aeca2095.js"><link rel="prefetch" href="/vdoingBlog/assets/js/117.d7dc004d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/118.84bcb9d9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/119.4dfa1c83.js"><link rel="prefetch" href="/vdoingBlog/assets/js/12.5d63e14e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/120.854e657f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/121.6da2d006.js"><link rel="prefetch" href="/vdoingBlog/assets/js/122.c3b31eb5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/123.11d5eecd.js"><link rel="prefetch" href="/vdoingBlog/assets/js/124.7a3b425f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/125.b9e5125a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/126.5c6a319c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/127.c4f91b82.js"><link rel="prefetch" href="/vdoingBlog/assets/js/128.a44c3fa4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/129.f8682a40.js"><link rel="prefetch" href="/vdoingBlog/assets/js/13.a5ee467c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/130.8c1775aa.js"><link rel="prefetch" href="/vdoingBlog/assets/js/131.55c54bc6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/132.7d15b20e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/133.b29cf3ba.js"><link rel="prefetch" href="/vdoingBlog/assets/js/134.314ca301.js"><link rel="prefetch" href="/vdoingBlog/assets/js/135.360ddced.js"><link rel="prefetch" href="/vdoingBlog/assets/js/136.78a4c5a1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/137.940596c3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/138.2ec64349.js"><link rel="prefetch" href="/vdoingBlog/assets/js/139.5a9b5fe5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/14.512fbd60.js"><link rel="prefetch" href="/vdoingBlog/assets/js/140.508c1e62.js"><link rel="prefetch" href="/vdoingBlog/assets/js/141.1cf87c66.js"><link rel="prefetch" href="/vdoingBlog/assets/js/142.d0673700.js"><link rel="prefetch" href="/vdoingBlog/assets/js/143.d931e217.js"><link rel="prefetch" href="/vdoingBlog/assets/js/144.2ba080d0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/145.34a66124.js"><link rel="prefetch" href="/vdoingBlog/assets/js/146.7326184c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/147.9a40c0bc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/148.5a0704ca.js"><link rel="prefetch" href="/vdoingBlog/assets/js/149.50811395.js"><link rel="prefetch" href="/vdoingBlog/assets/js/15.0e6b28e8.js"><link rel="prefetch" href="/vdoingBlog/assets/js/150.ce4936ee.js"><link rel="prefetch" href="/vdoingBlog/assets/js/151.d3b6c741.js"><link rel="prefetch" href="/vdoingBlog/assets/js/152.cf8a427e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/153.67b4278d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/154.696fd65b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/155.fb50bb35.js"><link rel="prefetch" href="/vdoingBlog/assets/js/156.1cfd70cc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/157.2686ced9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/158.2ae25174.js"><link rel="prefetch" href="/vdoingBlog/assets/js/159.7f50d687.js"><link rel="prefetch" href="/vdoingBlog/assets/js/16.d111875a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/160.f6a1a2f6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/161.4de2d7b6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/162.e07ff9e5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/163.b6d85d31.js"><link rel="prefetch" href="/vdoingBlog/assets/js/164.9df7b62a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/165.15094616.js"><link rel="prefetch" href="/vdoingBlog/assets/js/166.4502e212.js"><link rel="prefetch" href="/vdoingBlog/assets/js/167.0082e3a6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/168.a1f1e027.js"><link rel="prefetch" href="/vdoingBlog/assets/js/169.7182c79d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/17.a6b9fe89.js"><link rel="prefetch" href="/vdoingBlog/assets/js/170.419f80a9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/171.067de789.js"><link rel="prefetch" href="/vdoingBlog/assets/js/172.ebcd5f51.js"><link rel="prefetch" href="/vdoingBlog/assets/js/173.6ea25a9e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/174.048ac45b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/175.21ad8213.js"><link rel="prefetch" href="/vdoingBlog/assets/js/176.fc821e09.js"><link rel="prefetch" href="/vdoingBlog/assets/js/177.288a7737.js"><link rel="prefetch" href="/vdoingBlog/assets/js/178.0f0a8e39.js"><link rel="prefetch" href="/vdoingBlog/assets/js/179.5e6de083.js"><link rel="prefetch" href="/vdoingBlog/assets/js/18.6be9a6f0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/180.a2bb75b2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/181.cc9aad01.js"><link rel="prefetch" href="/vdoingBlog/assets/js/182.3be491c0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/183.ff692088.js"><link rel="prefetch" href="/vdoingBlog/assets/js/184.ab527a41.js"><link rel="prefetch" href="/vdoingBlog/assets/js/185.27c47df6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/186.e79580bc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/187.216360af.js"><link rel="prefetch" href="/vdoingBlog/assets/js/188.24cadeb0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/189.da233a87.js"><link rel="prefetch" href="/vdoingBlog/assets/js/19.86f6452b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/190.7f5da3da.js"><link rel="prefetch" href="/vdoingBlog/assets/js/191.8c4fce80.js"><link rel="prefetch" href="/vdoingBlog/assets/js/192.de037120.js"><link rel="prefetch" href="/vdoingBlog/assets/js/193.49af491f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/194.33cd7c3d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/195.d50e2b4a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/196.f4ac2d96.js"><link rel="prefetch" href="/vdoingBlog/assets/js/197.e83bd5da.js"><link rel="prefetch" href="/vdoingBlog/assets/js/198.b746f9b4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/199.287a6928.js"><link rel="prefetch" href="/vdoingBlog/assets/js/20.7ca85149.js"><link rel="prefetch" href="/vdoingBlog/assets/js/200.af57083b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/201.de53962d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/202.e39e4c9e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/203.8a43da34.js"><link rel="prefetch" href="/vdoingBlog/assets/js/204.3b48e56b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/205.58152076.js"><link rel="prefetch" href="/vdoingBlog/assets/js/206.7a570980.js"><link rel="prefetch" href="/vdoingBlog/assets/js/207.522085c9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/208.c169e955.js"><link rel="prefetch" href="/vdoingBlog/assets/js/209.243ad8a0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/21.bba7fcbf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/210.c3553b91.js"><link rel="prefetch" href="/vdoingBlog/assets/js/211.e8a75c3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/212.199703db.js"><link rel="prefetch" href="/vdoingBlog/assets/js/213.2dea942d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/214.40c70c39.js"><link rel="prefetch" href="/vdoingBlog/assets/js/215.6ddaa777.js"><link rel="prefetch" href="/vdoingBlog/assets/js/216.b8389550.js"><link rel="prefetch" href="/vdoingBlog/assets/js/217.034a8d97.js"><link rel="prefetch" href="/vdoingBlog/assets/js/218.326799dd.js"><link rel="prefetch" href="/vdoingBlog/assets/js/219.1ce05f0c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/22.6a217f79.js"><link rel="prefetch" href="/vdoingBlog/assets/js/220.f4b2b31f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/221.6f4b7e7d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/222.ddfc21ad.js"><link rel="prefetch" href="/vdoingBlog/assets/js/223.3285a573.js"><link rel="prefetch" href="/vdoingBlog/assets/js/224.1887e1cf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/225.d665d7de.js"><link rel="prefetch" href="/vdoingBlog/assets/js/226.d8d88acb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/227.dedbc9b5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/228.9f28147a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/229.5d3f5869.js"><link rel="prefetch" href="/vdoingBlog/assets/js/23.6f37664f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/230.b31887a1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/231.67fec01a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/232.bea7df27.js"><link rel="prefetch" href="/vdoingBlog/assets/js/233.5b3c6857.js"><link rel="prefetch" href="/vdoingBlog/assets/js/234.55f4734c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/235.64aa2ea9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/236.a2b44de4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/237.ce4d1dda.js"><link rel="prefetch" href="/vdoingBlog/assets/js/238.00c4438d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/239.3a6c497a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/24.330545a3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/240.3289617c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/241.44123b24.js"><link rel="prefetch" href="/vdoingBlog/assets/js/242.f6843956.js"><link rel="prefetch" href="/vdoingBlog/assets/js/243.0eb3259e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/244.b456176f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/245.464aa68a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/246.b2fd97f3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/247.01768412.js"><link rel="prefetch" href="/vdoingBlog/assets/js/248.cb33fa7d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/249.d0a22772.js"><link rel="prefetch" href="/vdoingBlog/assets/js/25.2affc905.js"><link rel="prefetch" href="/vdoingBlog/assets/js/250.bbb1d9f8.js"><link rel="prefetch" href="/vdoingBlog/assets/js/251.17732198.js"><link rel="prefetch" href="/vdoingBlog/assets/js/252.67ead1f3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/253.ff7432e4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/254.58f13ff0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/255.96282a6c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/256.16c6996c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/257.11426b0d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/258.fc70ecd1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/259.64662286.js"><link rel="prefetch" href="/vdoingBlog/assets/js/26.7460efa9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/260.be886c6b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/261.25f1bb31.js"><link rel="prefetch" href="/vdoingBlog/assets/js/262.793852d7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/263.4963bbd6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/264.e91dc44c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/265.2e93a9c1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/266.d5ed2010.js"><link rel="prefetch" href="/vdoingBlog/assets/js/267.002129a4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/268.09446f1b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/269.23bf3d9b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/27.8cf99488.js"><link rel="prefetch" href="/vdoingBlog/assets/js/270.dd152eff.js"><link rel="prefetch" href="/vdoingBlog/assets/js/271.38eeda08.js"><link rel="prefetch" href="/vdoingBlog/assets/js/272.41de06d9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/273.b8af50b4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/274.724e5983.js"><link rel="prefetch" href="/vdoingBlog/assets/js/275.713c772c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/276.c7c193c3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/277.893f4cf7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/278.358b4464.js"><link rel="prefetch" href="/vdoingBlog/assets/js/279.41cb7fc2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/28.5e432976.js"><link rel="prefetch" href="/vdoingBlog/assets/js/280.db41c095.js"><link rel="prefetch" href="/vdoingBlog/assets/js/281.bb0b84a9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/282.54b9417c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/29.f7b9a0a6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/30.fce3b883.js"><link rel="prefetch" href="/vdoingBlog/assets/js/31.e0777ef5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/32.025aa98c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/33.d34cfc3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/34.223f1e50.js"><link rel="prefetch" href="/vdoingBlog/assets/js/35.3d291932.js"><link rel="prefetch" href="/vdoingBlog/assets/js/36.74b28a40.js"><link rel="prefetch" href="/vdoingBlog/assets/js/37.f0702c91.js"><link rel="prefetch" href="/vdoingBlog/assets/js/38.15da7dbf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/39.932b8cb6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/4.a491a05d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/40.e249bf9a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/41.690459ca.js"><link rel="prefetch" href="/vdoingBlog/assets/js/42.5bd5f7f0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/43.f7e5a4b6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/44.5a483a79.js"><link rel="prefetch" href="/vdoingBlog/assets/js/45.c0bc03f5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/46.a5974c35.js"><link rel="prefetch" href="/vdoingBlog/assets/js/47.747acaf5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/48.58258c94.js"><link rel="prefetch" href="/vdoingBlog/assets/js/49.973c09f1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/5.5bfcaf23.js"><link rel="prefetch" href="/vdoingBlog/assets/js/50.8cf73048.js"><link rel="prefetch" href="/vdoingBlog/assets/js/51.b21c4ce2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/52.93254a3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/53.62ca680c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/54.b69108ab.js"><link rel="prefetch" href="/vdoingBlog/assets/js/55.91dc99a4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/56.4c7a79d1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/57.83aef27e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/58.54926fb5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/59.c69b7d5a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/6.a1476036.js"><link rel="prefetch" href="/vdoingBlog/assets/js/60.34ba73de.js"><link rel="prefetch" href="/vdoingBlog/assets/js/61.dfad92b5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/62.969e8a20.js"><link rel="prefetch" href="/vdoingBlog/assets/js/63.b8e0f8a2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/64.d8b8bd5e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/65.e5de6837.js"><link rel="prefetch" href="/vdoingBlog/assets/js/66.a26401e1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/67.00210a72.js"><link rel="prefetch" href="/vdoingBlog/assets/js/68.e910883f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/69.4ee7f4d3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/7.97c75439.js"><link rel="prefetch" href="/vdoingBlog/assets/js/70.a460a602.js"><link rel="prefetch" href="/vdoingBlog/assets/js/71.5c33e129.js"><link rel="prefetch" href="/vdoingBlog/assets/js/72.a71d8d18.js"><link rel="prefetch" href="/vdoingBlog/assets/js/73.5742fae2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/74.51cb4883.js"><link rel="prefetch" href="/vdoingBlog/assets/js/75.e88f1ce2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/76.0ba0af41.js"><link rel="prefetch" href="/vdoingBlog/assets/js/77.64546166.js"><link rel="prefetch" href="/vdoingBlog/assets/js/78.6ba65b66.js"><link rel="prefetch" href="/vdoingBlog/assets/js/79.14e24020.js"><link rel="prefetch" href="/vdoingBlog/assets/js/80.b9cd74eb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/81.f49a364d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/82.7d338240.js"><link rel="prefetch" href="/vdoingBlog/assets/js/83.fcbcdac1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/84.1003ec25.js"><link rel="prefetch" href="/vdoingBlog/assets/js/85.0b8c5902.js"><link rel="prefetch" href="/vdoingBlog/assets/js/86.4e9c3774.js"><link rel="prefetch" href="/vdoingBlog/assets/js/87.8be27033.js"><link rel="prefetch" href="/vdoingBlog/assets/js/88.cdf074e7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/89.8d3f92c1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/9.249dec4c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/90.089c63ac.js"><link rel="prefetch" href="/vdoingBlog/assets/js/91.397865aa.js"><link rel="prefetch" href="/vdoingBlog/assets/js/92.240472ae.js"><link rel="prefetch" href="/vdoingBlog/assets/js/93.2e5c2e33.js"><link rel="prefetch" href="/vdoingBlog/assets/js/94.788d4e86.js"><link rel="prefetch" href="/vdoingBlog/assets/js/95.d69ebc8e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/96.ccf3cb00.js"><link rel="prefetch" href="/vdoingBlog/assets/js/97.a44a6468.js"><link rel="prefetch" href="/vdoingBlog/assets/js/98.f286d274.js"><link rel="prefetch" href="/vdoingBlog/assets/js/99.e3822a1d.js">
    <link rel="stylesheet" href="/vdoingBlog/assets/css/0.styles.1a8a0045.css">
    <style>
      .theme-mode-light:after{background-image: url(https://img.xjh.me/random_img.php?ctype=acg&return=302&type=bg);content: "";background-repeat: no-repeat;background-position: 50%;opacity: .06;-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter: grayscale(100%);filter: #808080;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;}
      .theme-vdoing-wrapper{letter-spacing: 2px!important;background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%)!important;background-size: 20px 20px!important;background-position: center center!important}
</style>
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vdoingBlog/" class="home-link router-link-active"><img src="/vdoingBlog/img/csdn.png" alt="時念" class="logo"> <span class="site-name can-hide"></span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vdoingBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vdoingBlog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/wx-miniprogram/" class="nav-link">小程序笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/vdoingBlog/engineer/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7fae73/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/fa6492/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/37120b/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/53649b/" class="nav-link">高可用</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7d465c/" class="nav-link">高并发</a></li></ul></li><li class="dropdown-item"><h4>工作问题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/79637f/" class="nav-link">问题记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/vdoingBlog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/9a7ee40fc232253e/" class="nav-link">各类工具使用</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/vdoingBlog/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/a134b2/" class="nav-link">零碎</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/mianshi/" class="nav-link">面试常见题目汇总</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/aea6571b7a8bae86/" class="nav-link">面试集锦</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/vdoingBlog/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vdoingBlog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/vdoingBlog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vdoingBlog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/pasregret/vdoingBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/vdoingBlog/img/tx.jpg"> <div class="blogger-info"><h3>時念</h3> <span>
        一个有梦想的后端小菜鸡(✪ω✪)
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vdoingBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vdoingBlog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/wx-miniprogram/" class="nav-link">小程序笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/vdoingBlog/engineer/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7fae73/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/fa6492/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/37120b/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/53649b/" class="nav-link">高可用</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7d465c/" class="nav-link">高并发</a></li></ul></li><li class="dropdown-item"><h4>工作问题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/79637f/" class="nav-link">问题记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/vdoingBlog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/9a7ee40fc232253e/" class="nav-link">各类工具使用</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/vdoingBlog/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/a134b2/" class="nav-link">零碎</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/mianshi/" class="nav-link">面试常见题目汇总</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/aea6571b7a8bae86/" class="nav-link">面试集锦</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/vdoingBlog/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vdoingBlog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/vdoingBlog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vdoingBlog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/pasregret/vdoingBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vdoingBlog/pages/7fae73/" class="sidebar-link">java测试</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>问题记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高可用</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-f6108aee><div class="articleInfo" data-v-f6108aee><ul class="breadcrumbs" data-v-f6108aee><li data-v-f6108aee><a href="/vdoingBlog/" title="首页" class="iconfont icon-home router-link-active" data-v-f6108aee></a></li> <li data-v-f6108aee><a href="/vdoingBlog/engineer" title="后端-目录页" data-v-f6108aee>后端</a></li> <!----></ul> <div class="info" data-v-f6108aee><div title="作者" class="author iconfont icon-touxiang" data-v-f6108aee><a href="https://github.com/pasregret" target="_blank" title="作者" class="beLink" data-v-f6108aee>時念</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-f6108aee><a href="javascript:;" data-v-f6108aee>2024-03-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          how-to-ensure-the-order-of-messages
        </h1> <div class="theme-vdoing-content content__default"><h2 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h2> <p>如何保证消息的顺序性？</p> <h2 id="面试官心理分析"><a href="#面试官心理分析" class="header-anchor">#</a> 面试官心理分析</h2> <p>其实这个也是用 MQ 的时候必问的话题，第一看看你了不了解顺序这个事儿？第二看看你有没有办法保证消息是有顺序的？这是生产系统中常见的问题。</p> <h2 id="面试题剖析"><a href="#面试题剖析" class="header-anchor">#</a> 面试题剖析</h2> <p>我举个例子，我们以前做过一个 mysql <code>binlog</code> 同步的系统，压力还是非常大的，日同步数据要达到上亿，就是说数据从一个 mysql 库原封不动地同步到另一个 mysql 库里面去（mysql -&gt; mysql）。常见的一点在于说比如大数据 team，就需要同步一个 mysql 库过来，对公司的业务系统的数据做各种复杂的操作。</p> <p>你在 mysql 里增删改一条数据，对应出来了增删改 3 条 <code>binlog</code> 日志，接着这三条 <code>binlog</code> 发送到 MQ 里面，再消费出来依次执行，起码得保证人家是按照顺序来的吧？不然本来是：增加、修改、删除；你愣是换了顺序给执行成删除、修改、增加，不全错了么。</p> <p>本来这个数据同步过来，应该最后这个数据被删除了；结果你搞错了这个顺序，最后这个数据保留下来了，数据同步就出错了。</p> <p>先看看顺序会错乱的俩场景：</p> <ul><li><strong>RabbitMQ</strong>：一个 queue，多个 consumer。比如，生产者向 RabbitMQ 里发送了三条数据，顺序依次是 data1/data2/data3，压入的是 RabbitMQ 的一个内存队列。有三个消费者分别从 MQ 中消费这三条数据中的一条，结果消费者 2 先执行完操作，把 data2 存入数据库，然后是 data1/data3。这不明显乱了。</li></ul> <p><img src="data:image/png;base64,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" alt="rabbitmq-order-01"></p> <ul><li><strong>Kafka</strong>：比如说我们建了一个 topic，有三个 partition。生产者在写的时候，其实可以指定一个 key，比如说我们指定了某个订单 id 作为 key，那么这个订单相关的数据，一定会被分发到同一个 partition 中去，而且这个 partition 中的数据一定是有顺序的。<br>消费者从 partition 中取出来数据的时候，也一定是有顺序的。到这里，顺序还是 ok 的，没有错乱。接着，我们在消费者里可能会搞<strong>多个线程来并发处理消息</strong>。因为如果消费者是单线程消费处理，而处理比较耗时的话，比如处理一条消息耗时几十 ms，那么 1 秒钟只能处理几十条消息，这吞吐量太低了。而多个线程并发跑的话，顺序可能就乱掉了。</li></ul> <p><img src="/vdoingBlog/assets/img/kafka-order-01.0928b0ca.png" alt="kafka-order-01"></p> <h3 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> 解决方案</h3> <h4 id="rabbitmq"><a href="#rabbitmq" class="header-anchor">#</a> RabbitMQ</h4> <p>拆分多个 queue，每个 queue 一个 consumer，就是多一些 queue 而已，确实是麻烦点，这样也会造成吞吐量下降，可以在消费者内部采用多线程的方式取消费。</p> <p><img src="data:image/png;base64,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" alt="rabbitmq-order-02"></p> <p>或者就一个 queue 但是对应一个 consumer，然后这个 consumer 内部用内存队列做排队，然后分发给底层不同的 worker 来处理。</p> <p>注意，这里消费者不直接消费消息，而是将消息根据关键值（比如：订单 id）进行哈希，哈希值相同的消息保存到相同的内存队列里。也就是说，需要保证顺序的消息存到了相同的内存队列，然后由一个唯一的 worker 去处理。</p> <h4 id="kafka"><a href="#kafka" class="header-anchor">#</a> Kafka</h4> <ul><li>一个 topic，一个 partition，一个 consumer，内部单线程消费，单线程吞吐量太低，一般不会用这个。</li> <li>写 N 个内存 queue，具有相同 key 的数据都到同一个内存 queue；然后对于 N 个线程，每个线程分别消费一个内存 queue 即可，这样就能保证顺序性。</li></ul> <p><img src="/vdoingBlog/assets/img/kafka-order-02.3c930540.png" alt="kafka-order-02"></p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pasregret/vdoingBlog/edit/master/docs/02.后端/high-concurrency/how-to-ensure-the-order-of-messages.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/03/26, 9:03:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/vdoingBlog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vdoingBlog/pages/bc52b9/"><div>database-shard-dynamic-expand</div></a> <span>03-26</span></dt></dl><dl><dd>02</dd> <dt><a href="/vdoingBlog/pages/7d465c/"><div>README</div></a> <span>03-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/vdoingBlog/pages/b3459f/"><div>database-shard-global-id-generate</div></a> <span>03-26</span></dt></dl> <dl><dd></dd> <dt><a href="/vdoingBlog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="https://msg.cnblogs.com/send/pasregret" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://blog.csdn.net/qq_17589751?type=blog" title="CSDN" target="_blank" class="iconfont icon-csdn"></a><a href="https://github.com/pasregret" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=2507037283" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2019-2024
    <span>時念 | <a href="https://github.com/pasregret/vdoingBlog/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vdoingBlog/assets/js/app.b9445f3d.js" defer></script><script src="/vdoingBlog/assets/js/2.6f6622d0.js" defer></script><script src="/vdoingBlog/assets/js/3.2637abc7.js" defer></script><script src="/vdoingBlog/assets/js/8.a941c0a5.js" defer></script>
  </body>
</html>