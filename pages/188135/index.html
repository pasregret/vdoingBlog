<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>why-mq | 時念</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vdoingBlog/img/csdn.ico">
    <link rel="stylesheet" href="/vdoingBlog/icon/iconfont.css">
    <meta name="description" content="在努力一点，成为更优秀的人">
    <meta name="keywords" content="全栈博客,个人技术博客,前端,后端开发,后端框架,技术文档,学习,面试,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/vdoingBlog/assets/css/0.styles.1a8a0045.css" as="style"><link rel="preload" href="/vdoingBlog/assets/js/app.b9445f3d.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/2.6f6622d0.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/3.2637abc7.js" as="script"><link rel="preload" href="/vdoingBlog/assets/js/4.a491a05d.js" as="script"><link rel="prefetch" href="/vdoingBlog/assets/js/10.f47bb344.js"><link rel="prefetch" href="/vdoingBlog/assets/js/100.42845136.js"><link rel="prefetch" href="/vdoingBlog/assets/js/101.f4fa1fb3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/102.3b223ea5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/103.2feef0d7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/104.d8c00bff.js"><link rel="prefetch" href="/vdoingBlog/assets/js/105.20cd0607.js"><link rel="prefetch" href="/vdoingBlog/assets/js/106.001d93be.js"><link rel="prefetch" href="/vdoingBlog/assets/js/107.b8d7babc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/108.910bf8f7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/109.78853843.js"><link rel="prefetch" href="/vdoingBlog/assets/js/11.aa074a37.js"><link rel="prefetch" href="/vdoingBlog/assets/js/110.d242bfec.js"><link rel="prefetch" href="/vdoingBlog/assets/js/111.6a5c9de7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/112.d252eeeb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/113.d9f0ce34.js"><link rel="prefetch" href="/vdoingBlog/assets/js/114.fe4b6af6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/115.e4a474d2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/116.aeca2095.js"><link rel="prefetch" href="/vdoingBlog/assets/js/117.d7dc004d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/118.84bcb9d9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/119.4dfa1c83.js"><link rel="prefetch" href="/vdoingBlog/assets/js/12.5d63e14e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/120.854e657f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/121.6da2d006.js"><link rel="prefetch" href="/vdoingBlog/assets/js/122.c3b31eb5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/123.11d5eecd.js"><link rel="prefetch" href="/vdoingBlog/assets/js/124.7a3b425f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/125.b9e5125a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/126.5c6a319c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/127.c4f91b82.js"><link rel="prefetch" href="/vdoingBlog/assets/js/128.a44c3fa4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/129.f8682a40.js"><link rel="prefetch" href="/vdoingBlog/assets/js/13.a5ee467c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/130.8c1775aa.js"><link rel="prefetch" href="/vdoingBlog/assets/js/131.55c54bc6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/132.7d15b20e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/133.b29cf3ba.js"><link rel="prefetch" href="/vdoingBlog/assets/js/134.314ca301.js"><link rel="prefetch" href="/vdoingBlog/assets/js/135.360ddced.js"><link rel="prefetch" href="/vdoingBlog/assets/js/136.78a4c5a1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/137.940596c3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/138.2ec64349.js"><link rel="prefetch" href="/vdoingBlog/assets/js/139.5a9b5fe5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/14.512fbd60.js"><link rel="prefetch" href="/vdoingBlog/assets/js/140.508c1e62.js"><link rel="prefetch" href="/vdoingBlog/assets/js/141.1cf87c66.js"><link rel="prefetch" href="/vdoingBlog/assets/js/142.d0673700.js"><link rel="prefetch" href="/vdoingBlog/assets/js/143.d931e217.js"><link rel="prefetch" href="/vdoingBlog/assets/js/144.2ba080d0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/145.34a66124.js"><link rel="prefetch" href="/vdoingBlog/assets/js/146.7326184c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/147.9a40c0bc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/148.5a0704ca.js"><link rel="prefetch" href="/vdoingBlog/assets/js/149.50811395.js"><link rel="prefetch" href="/vdoingBlog/assets/js/15.0e6b28e8.js"><link rel="prefetch" href="/vdoingBlog/assets/js/150.ce4936ee.js"><link rel="prefetch" href="/vdoingBlog/assets/js/151.d3b6c741.js"><link rel="prefetch" href="/vdoingBlog/assets/js/152.cf8a427e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/153.67b4278d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/154.696fd65b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/155.fb50bb35.js"><link rel="prefetch" href="/vdoingBlog/assets/js/156.1cfd70cc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/157.2686ced9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/158.2ae25174.js"><link rel="prefetch" href="/vdoingBlog/assets/js/159.7f50d687.js"><link rel="prefetch" href="/vdoingBlog/assets/js/16.d111875a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/160.f6a1a2f6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/161.4de2d7b6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/162.e07ff9e5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/163.b6d85d31.js"><link rel="prefetch" href="/vdoingBlog/assets/js/164.9df7b62a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/165.15094616.js"><link rel="prefetch" href="/vdoingBlog/assets/js/166.4502e212.js"><link rel="prefetch" href="/vdoingBlog/assets/js/167.0082e3a6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/168.a1f1e027.js"><link rel="prefetch" href="/vdoingBlog/assets/js/169.7182c79d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/17.a6b9fe89.js"><link rel="prefetch" href="/vdoingBlog/assets/js/170.419f80a9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/171.067de789.js"><link rel="prefetch" href="/vdoingBlog/assets/js/172.ebcd5f51.js"><link rel="prefetch" href="/vdoingBlog/assets/js/173.6ea25a9e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/174.048ac45b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/175.21ad8213.js"><link rel="prefetch" href="/vdoingBlog/assets/js/176.fc821e09.js"><link rel="prefetch" href="/vdoingBlog/assets/js/177.288a7737.js"><link rel="prefetch" href="/vdoingBlog/assets/js/178.0f0a8e39.js"><link rel="prefetch" href="/vdoingBlog/assets/js/179.5e6de083.js"><link rel="prefetch" href="/vdoingBlog/assets/js/18.6be9a6f0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/180.a2bb75b2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/181.cc9aad01.js"><link rel="prefetch" href="/vdoingBlog/assets/js/182.3be491c0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/183.ff692088.js"><link rel="prefetch" href="/vdoingBlog/assets/js/184.ab527a41.js"><link rel="prefetch" href="/vdoingBlog/assets/js/185.27c47df6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/186.e79580bc.js"><link rel="prefetch" href="/vdoingBlog/assets/js/187.216360af.js"><link rel="prefetch" href="/vdoingBlog/assets/js/188.24cadeb0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/189.da233a87.js"><link rel="prefetch" href="/vdoingBlog/assets/js/19.86f6452b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/190.7f5da3da.js"><link rel="prefetch" href="/vdoingBlog/assets/js/191.8c4fce80.js"><link rel="prefetch" href="/vdoingBlog/assets/js/192.de037120.js"><link rel="prefetch" href="/vdoingBlog/assets/js/193.49af491f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/194.33cd7c3d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/195.d50e2b4a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/196.f4ac2d96.js"><link rel="prefetch" href="/vdoingBlog/assets/js/197.e83bd5da.js"><link rel="prefetch" href="/vdoingBlog/assets/js/198.b746f9b4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/199.287a6928.js"><link rel="prefetch" href="/vdoingBlog/assets/js/20.7ca85149.js"><link rel="prefetch" href="/vdoingBlog/assets/js/200.af57083b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/201.de53962d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/202.e39e4c9e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/203.8a43da34.js"><link rel="prefetch" href="/vdoingBlog/assets/js/204.3b48e56b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/205.58152076.js"><link rel="prefetch" href="/vdoingBlog/assets/js/206.7a570980.js"><link rel="prefetch" href="/vdoingBlog/assets/js/207.522085c9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/208.c169e955.js"><link rel="prefetch" href="/vdoingBlog/assets/js/209.243ad8a0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/21.bba7fcbf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/210.c3553b91.js"><link rel="prefetch" href="/vdoingBlog/assets/js/211.e8a75c3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/212.199703db.js"><link rel="prefetch" href="/vdoingBlog/assets/js/213.2dea942d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/214.40c70c39.js"><link rel="prefetch" href="/vdoingBlog/assets/js/215.6ddaa777.js"><link rel="prefetch" href="/vdoingBlog/assets/js/216.b8389550.js"><link rel="prefetch" href="/vdoingBlog/assets/js/217.034a8d97.js"><link rel="prefetch" href="/vdoingBlog/assets/js/218.326799dd.js"><link rel="prefetch" href="/vdoingBlog/assets/js/219.1ce05f0c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/22.6a217f79.js"><link rel="prefetch" href="/vdoingBlog/assets/js/220.f4b2b31f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/221.6f4b7e7d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/222.ddfc21ad.js"><link rel="prefetch" href="/vdoingBlog/assets/js/223.3285a573.js"><link rel="prefetch" href="/vdoingBlog/assets/js/224.1887e1cf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/225.d665d7de.js"><link rel="prefetch" href="/vdoingBlog/assets/js/226.d8d88acb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/227.dedbc9b5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/228.9f28147a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/229.5d3f5869.js"><link rel="prefetch" href="/vdoingBlog/assets/js/23.6f37664f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/230.b31887a1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/231.67fec01a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/232.bea7df27.js"><link rel="prefetch" href="/vdoingBlog/assets/js/233.5b3c6857.js"><link rel="prefetch" href="/vdoingBlog/assets/js/234.55f4734c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/235.64aa2ea9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/236.a2b44de4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/237.ce4d1dda.js"><link rel="prefetch" href="/vdoingBlog/assets/js/238.00c4438d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/239.3a6c497a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/24.330545a3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/240.3289617c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/241.44123b24.js"><link rel="prefetch" href="/vdoingBlog/assets/js/242.f6843956.js"><link rel="prefetch" href="/vdoingBlog/assets/js/243.0eb3259e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/244.b456176f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/245.464aa68a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/246.b2fd97f3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/247.01768412.js"><link rel="prefetch" href="/vdoingBlog/assets/js/248.cb33fa7d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/249.d0a22772.js"><link rel="prefetch" href="/vdoingBlog/assets/js/25.2affc905.js"><link rel="prefetch" href="/vdoingBlog/assets/js/250.bbb1d9f8.js"><link rel="prefetch" href="/vdoingBlog/assets/js/251.17732198.js"><link rel="prefetch" href="/vdoingBlog/assets/js/252.67ead1f3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/253.ff7432e4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/254.58f13ff0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/255.96282a6c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/256.16c6996c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/257.11426b0d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/258.fc70ecd1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/259.64662286.js"><link rel="prefetch" href="/vdoingBlog/assets/js/26.7460efa9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/260.be886c6b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/261.25f1bb31.js"><link rel="prefetch" href="/vdoingBlog/assets/js/262.793852d7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/263.4963bbd6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/264.e91dc44c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/265.2e93a9c1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/266.d5ed2010.js"><link rel="prefetch" href="/vdoingBlog/assets/js/267.002129a4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/268.09446f1b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/269.23bf3d9b.js"><link rel="prefetch" href="/vdoingBlog/assets/js/27.8cf99488.js"><link rel="prefetch" href="/vdoingBlog/assets/js/270.dd152eff.js"><link rel="prefetch" href="/vdoingBlog/assets/js/271.38eeda08.js"><link rel="prefetch" href="/vdoingBlog/assets/js/272.41de06d9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/273.b8af50b4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/274.724e5983.js"><link rel="prefetch" href="/vdoingBlog/assets/js/275.713c772c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/276.c7c193c3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/277.893f4cf7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/278.358b4464.js"><link rel="prefetch" href="/vdoingBlog/assets/js/279.41cb7fc2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/28.5e432976.js"><link rel="prefetch" href="/vdoingBlog/assets/js/280.db41c095.js"><link rel="prefetch" href="/vdoingBlog/assets/js/281.bb0b84a9.js"><link rel="prefetch" href="/vdoingBlog/assets/js/282.54b9417c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/29.f7b9a0a6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/30.fce3b883.js"><link rel="prefetch" href="/vdoingBlog/assets/js/31.e0777ef5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/32.025aa98c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/33.d34cfc3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/34.223f1e50.js"><link rel="prefetch" href="/vdoingBlog/assets/js/35.3d291932.js"><link rel="prefetch" href="/vdoingBlog/assets/js/36.74b28a40.js"><link rel="prefetch" href="/vdoingBlog/assets/js/37.f0702c91.js"><link rel="prefetch" href="/vdoingBlog/assets/js/38.15da7dbf.js"><link rel="prefetch" href="/vdoingBlog/assets/js/39.932b8cb6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/40.e249bf9a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/41.690459ca.js"><link rel="prefetch" href="/vdoingBlog/assets/js/42.5bd5f7f0.js"><link rel="prefetch" href="/vdoingBlog/assets/js/43.f7e5a4b6.js"><link rel="prefetch" href="/vdoingBlog/assets/js/44.5a483a79.js"><link rel="prefetch" href="/vdoingBlog/assets/js/45.c0bc03f5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/46.a5974c35.js"><link rel="prefetch" href="/vdoingBlog/assets/js/47.747acaf5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/48.58258c94.js"><link rel="prefetch" href="/vdoingBlog/assets/js/49.973c09f1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/5.5bfcaf23.js"><link rel="prefetch" href="/vdoingBlog/assets/js/50.8cf73048.js"><link rel="prefetch" href="/vdoingBlog/assets/js/51.b21c4ce2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/52.93254a3c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/53.62ca680c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/54.b69108ab.js"><link rel="prefetch" href="/vdoingBlog/assets/js/55.91dc99a4.js"><link rel="prefetch" href="/vdoingBlog/assets/js/56.4c7a79d1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/57.83aef27e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/58.54926fb5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/59.c69b7d5a.js"><link rel="prefetch" href="/vdoingBlog/assets/js/6.a1476036.js"><link rel="prefetch" href="/vdoingBlog/assets/js/60.34ba73de.js"><link rel="prefetch" href="/vdoingBlog/assets/js/61.dfad92b5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/62.969e8a20.js"><link rel="prefetch" href="/vdoingBlog/assets/js/63.b8e0f8a2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/64.d8b8bd5e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/65.e5de6837.js"><link rel="prefetch" href="/vdoingBlog/assets/js/66.a26401e1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/67.00210a72.js"><link rel="prefetch" href="/vdoingBlog/assets/js/68.e910883f.js"><link rel="prefetch" href="/vdoingBlog/assets/js/69.4ee7f4d3.js"><link rel="prefetch" href="/vdoingBlog/assets/js/7.97c75439.js"><link rel="prefetch" href="/vdoingBlog/assets/js/70.a460a602.js"><link rel="prefetch" href="/vdoingBlog/assets/js/71.5c33e129.js"><link rel="prefetch" href="/vdoingBlog/assets/js/72.a71d8d18.js"><link rel="prefetch" href="/vdoingBlog/assets/js/73.5742fae2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/74.51cb4883.js"><link rel="prefetch" href="/vdoingBlog/assets/js/75.e88f1ce2.js"><link rel="prefetch" href="/vdoingBlog/assets/js/76.0ba0af41.js"><link rel="prefetch" href="/vdoingBlog/assets/js/77.64546166.js"><link rel="prefetch" href="/vdoingBlog/assets/js/78.6ba65b66.js"><link rel="prefetch" href="/vdoingBlog/assets/js/79.14e24020.js"><link rel="prefetch" href="/vdoingBlog/assets/js/8.a941c0a5.js"><link rel="prefetch" href="/vdoingBlog/assets/js/80.b9cd74eb.js"><link rel="prefetch" href="/vdoingBlog/assets/js/81.f49a364d.js"><link rel="prefetch" href="/vdoingBlog/assets/js/82.7d338240.js"><link rel="prefetch" href="/vdoingBlog/assets/js/83.fcbcdac1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/84.1003ec25.js"><link rel="prefetch" href="/vdoingBlog/assets/js/85.0b8c5902.js"><link rel="prefetch" href="/vdoingBlog/assets/js/86.4e9c3774.js"><link rel="prefetch" href="/vdoingBlog/assets/js/87.8be27033.js"><link rel="prefetch" href="/vdoingBlog/assets/js/88.cdf074e7.js"><link rel="prefetch" href="/vdoingBlog/assets/js/89.8d3f92c1.js"><link rel="prefetch" href="/vdoingBlog/assets/js/9.249dec4c.js"><link rel="prefetch" href="/vdoingBlog/assets/js/90.089c63ac.js"><link rel="prefetch" href="/vdoingBlog/assets/js/91.397865aa.js"><link rel="prefetch" href="/vdoingBlog/assets/js/92.240472ae.js"><link rel="prefetch" href="/vdoingBlog/assets/js/93.2e5c2e33.js"><link rel="prefetch" href="/vdoingBlog/assets/js/94.788d4e86.js"><link rel="prefetch" href="/vdoingBlog/assets/js/95.d69ebc8e.js"><link rel="prefetch" href="/vdoingBlog/assets/js/96.ccf3cb00.js"><link rel="prefetch" href="/vdoingBlog/assets/js/97.a44a6468.js"><link rel="prefetch" href="/vdoingBlog/assets/js/98.f286d274.js"><link rel="prefetch" href="/vdoingBlog/assets/js/99.e3822a1d.js">
    <link rel="stylesheet" href="/vdoingBlog/assets/css/0.styles.1a8a0045.css">
    <style>
      .theme-mode-light:after{background-image: url(https://img.xjh.me/random_img.php?ctype=acg&return=302&type=bg);content: "";background-repeat: no-repeat;background-position: 50%;opacity: .06;-moz-filter: grayscale(100%);-ms-filter: grayscale(100%);-o-filter: grayscale(100%);filter: grayscale(100%);filter: #808080;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index: -1;}
      .theme-vdoing-wrapper{letter-spacing: 2px!important;background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%)!important;background-size: 20px 20px!important;background-position: center center!important}
</style>
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vdoingBlog/" class="home-link router-link-active"><img src="/vdoingBlog/img/csdn.png" alt="時念" class="logo"> <span class="site-name can-hide"></span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vdoingBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vdoingBlog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/wx-miniprogram/" class="nav-link">小程序笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/vdoingBlog/engineer/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7fae73/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/fa6492/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/37120b/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/53649b/" class="nav-link">高可用</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7d465c/" class="nav-link">高并发</a></li></ul></li><li class="dropdown-item"><h4>工作问题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/79637f/" class="nav-link">问题记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/vdoingBlog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/9a7ee40fc232253e/" class="nav-link">各类工具使用</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/vdoingBlog/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/a134b2/" class="nav-link">零碎</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/mianshi/" class="nav-link">面试常见题目汇总</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/aea6571b7a8bae86/" class="nav-link">面试集锦</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/vdoingBlog/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vdoingBlog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/vdoingBlog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vdoingBlog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/pasregret/vdoingBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/vdoingBlog/img/tx.jpg"> <div class="blogger-info"><h3>時念</h3> <span>
        一个有梦想的后端小菜鸡(✪ω✪)
      </span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/vdoingBlog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/vdoingBlog/web/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端文章</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/8143cc480faf9a11/" class="nav-link">JavaScript</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/802a1ca6f7b71c59/" class="nav-link">Vue</a></li></ul></li><li class="dropdown-item"><h4>学习笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascript/" class="nav-link">《JavaScript教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/es6/" class="nav-link">《ES6 教程》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/vue/" class="nav-link">《Vue》笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/typescript-axios/" class="nav-link">《TypeScript 从零实现 axios》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/wx-miniprogram/" class="nav-link">小程序笔记</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/javascriptbasics/" class="nav-link">JavaScript 基础</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><a href="/vdoingBlog/engineer/" class="link-title">后端</a> <span class="title" style="display:none;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7fae73/" class="nav-link">Java</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/fa6492/" class="nav-link">Spring</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/37120b/" class="nav-link">算法</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/53649b/" class="nav-link">高可用</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/7d465c/" class="nav-link">高并发</a></li></ul></li><li class="dropdown-item"><h4>工作问题</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/79637f/" class="nav-link">问题记录</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/vdoingBlog/technology/" class="link-title">技术</a> <span class="title" style="display:none;">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/9a7ee40fc232253e/" class="nav-link">各类工具使用</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试" class="dropdown-title"><a href="/vdoingBlog/interview/" class="link-title">面试</a> <span class="title" style="display:none;">面试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>面试题库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/a134b2/" class="nav-link">零碎</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/mianshi/" class="nav-link">面试常见题目汇总</a></li></ul></li><li class="dropdown-item"><h4>面试心得</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/pages/aea6571b7a8bae86/" class="nav-link">面试集锦</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/pages/331dbf/" class="nav-link">杂言碎语</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书派" class="dropdown-title"><a href="/vdoingBlog/bookssent/" class="link-title">读书派</a> <span class="title" style="display:none;">读书派</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>摘抄收录</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/ChickenSoup/" class="nav-link">☆ 励志鸡汤</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/PassionLife/" class="nav-link">❀ 人间烟火</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/ThingsLost/" class="nav-link">☣ 万物沦丧</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/NoTrouble/" class="nav-link">✌ 关掉烦恼</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/Bistro/" class="nav-link">✲ 小酒馆</a></li></ul></li><li class="dropdown-item"><h4>读书笔记</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vdoingBlog/note/xgqq/" class="nav-link">《小狗钱钱》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/qbbfbb/" class="nav-link">《穷爸爸富爸爸》</a></li><li class="dropdown-subitem"><a href="/vdoingBlog/note/cmrsyfgbjb/" class="nav-link">《聪明人使用方格笔记本》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/vdoingBlog/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><a href="/vdoingBlog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/vdoingBlog/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vdoingBlog/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/vdoingBlog/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/pasregret/vdoingBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vdoingBlog/pages/7fae73/" class="sidebar-link">java测试</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>问题记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高可用</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-f6108aee><div class="articleInfo" data-v-f6108aee><ul class="breadcrumbs" data-v-f6108aee><li data-v-f6108aee><a href="/vdoingBlog/" title="首页" class="iconfont icon-home router-link-active" data-v-f6108aee></a></li> <li data-v-f6108aee><a href="/vdoingBlog/engineer" title="后端-目录页" data-v-f6108aee>后端</a></li> <!----></ul> <div class="info" data-v-f6108aee><div title="作者" class="author iconfont icon-touxiang" data-v-f6108aee><a href="https://github.com/pasregret" target="_blank" title="作者" class="beLink" data-v-f6108aee>時念</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-f6108aee><a href="javascript:;" data-v-f6108aee>2024-03-26</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          why-mq
        </h1> <div class="theme-vdoing-content content__default"><h2 id="面试题"><a href="#面试题" class="header-anchor">#</a> 面试题</h2> <ul><li>为什么使用消息队列？</li> <li>消息队列有什么优点和缺点？</li> <li>Kafka、ActiveMQ、RabbitMQ、RocketMQ 都有什么区别，以及适合哪些场景？</li></ul> <h2 id="面试官心理分析"><a href="#面试官心理分析" class="header-anchor">#</a> 面试官心理分析</h2> <p>其实面试官主要是想看看：</p> <ul><li><p><strong>第一</strong>，你知不知道你们系统里为什么要用消息队列这个东西？</p> <p>不少候选人，说自己项目里用了 Redis、MQ，但是其实他并不知道自己为什么要用这个东西。其实说白了，就是为了用而用，或者是别人设计的架构，他从头到尾都没思考过。</p> <p>没有对自己的架构问过为什么的人，一定是平时没有思考的人，面试官对这类候选人印象通常很不好。因为面试官担心你进了团队之后只会木头木脑的干呆活儿，不会自己思考。</p></li> <li><p><strong>第二</strong>，你既然用了消息队列这个东西，你知不知道用了有什么好处&amp;坏处？</p> <p>你要是没考虑过这个，那你盲目弄个 MQ 进系统里，后面出了问题你是不是就自己溜了给公司留坑？你要是没考虑过引入一个技术可能存在的弊端和风险，面试官把这类候选人招进来了，基本可能就是挖坑型选手。就怕你干 1 年挖一堆坑，自己跳槽了，给公司留下无穷后患。</p></li> <li><p><strong>第三</strong>，既然你用了 MQ，可能是某一种 MQ，那么你当时做没做过调研？</p> <p>你别傻乎乎的自己拍脑袋看个人喜好就瞎用了一个 MQ，比如 Kafka，甚至都从没调研过业界流行的 MQ 到底有哪几种。每一个 MQ 的优点和缺点是什么。每一个 MQ <strong>没有绝对的好坏</strong>，但是就是看用在哪个场景可以<strong>扬长避短，利用其优势，规避其劣势</strong>。</p> <p>如果是一个不考虑技术选型的候选人招进了团队，leader 交给他一个任务，去设计个什么系统，他在里面用一些技术，可能都没考虑过选型，最后选的技术可能并不一定合适，一样是留坑。</p></li></ul> <h2 id="面试题剖析"><a href="#面试题剖析" class="header-anchor">#</a> 面试题剖析</h2> <h3 id="为什么使用消息队列"><a href="#为什么使用消息队列" class="header-anchor">#</a> 为什么使用消息队列</h3> <p>其实就是问问你消息队列都有哪些使用场景，然后你项目里具体是什么场景，说说你在这个场景里用消息队列是什么？</p> <p>面试官问你这个问题，<strong>期望的一个回答</strong>是说，你们公司有个什么<strong>业务场景</strong>，这个业务场景有个什么技术挑战，如果不用 MQ 可能会很麻烦，但是你现在用了 MQ 之后带给了你很多的好处。</p> <p>先说一下消息队列常见的使用场景吧，其实场景有很多，但是比较核心的有 3 个：<strong>解耦</strong>、<strong>异步</strong>、<strong>削峰</strong>。</p> <h4 id="解耦"><a href="#解耦" class="header-anchor">#</a> 解耦</h4> <p>看这么个场景。A 系统发送数据到 BCD 三个系统，通过接口调用发送。如果 E 系统也要这个数据呢？那如果 C 系统现在不需要了呢？A 系统负责人几乎崩溃......</p> <p><img src="/vdoingBlog/assets/img/mq-1.c053add8.png" alt="mq-1"></p> <p>在这个场景中，A 系统跟其它各种乱七八糟的系统严重耦合，A 系统产生一条比较关键的数据，很多系统都需要 A 系统将这个数据发送过来。A 系统要时时刻刻考虑 BCDE 四个系统如果挂了该咋办？要不要重发，要不要把消息存起来？头发都白了啊！</p> <p>如果使用 MQ，A 系统产生一条数据，发送到 MQ 里面去，哪个系统需要数据自己去 MQ 里面消费。如果新系统需要数据，直接从 MQ 里消费即可；如果某个系统不需要这条数据了，就取消对 MQ 消息的消费即可。这样下来，A 系统压根儿不需要去考虑要给谁发送数据，不需要维护这个代码，也不需要考虑人家是否调用成功、失败超时等情况。</p> <p><img src="/vdoingBlog/assets/img/mq-2.409d1eb5.png" alt="mq-2"></p> <p><strong>总结</strong>：通过一个 MQ，Pub/Sub 发布订阅消息这么一个模型，A 系统就跟其它系统彻底解耦了。</p> <p><strong>面试技巧</strong>：你需要去考虑一下你负责的系统中是否有类似的场景，就是一个系统或者一个模块，调用了多个系统或者模块，互相之间的调用很复杂，维护起来很麻烦。但是其实这个调用是不需要直接同步调用接口的，如果用 MQ 给它异步化解耦，也是可以的，你就需要去考虑在你的项目里，是不是可以运用这个 MQ 去进行系统的解耦。在简历中体现出来这块东西，用 MQ 作解耦。</p> <h4 id="异步"><a href="#异步" class="header-anchor">#</a> 异步</h4> <p>再来看一个场景，A 系统接收一个请求，需要在自己本地写库，还需要在 BCD 三个系统写库，自己本地写库要 3ms，BCD 三个系统分别写库要 300ms、450ms、200ms。最终请求总延时是 3 + 300 + 450 + 200 = 953ms，接近 1s，用户感觉搞个什么东西，慢死了慢死了。用户通过浏览器发起请求，等待个 1s，这几乎是不可接受的。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjwAAAFxCAQAAADdKLo+AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAB8DSURBVHja7Z15fFTl3bdvZQ0QBUFxQbGIEolJmHsiqCAGieIuqLS4Y6ttbWvt49baPqVvfbQb1mq1WLvYWrXqR1tbrWJfWxGrVitV5HVBW1r7AoIQdqLGZHI9f8xkCCEIgczEMNd1/pglIZz5/n5znfvc55yZEEREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREQkZ4wuTo5LXpGYEWfG1+LbcU2sj/VxTXw7vhZnJmYkr0iOG11sSvkj8Xxkx1gSs6ymbEJV18TY5PfjyzG1xRZKxZeT30+MrepqarlnR9FOJGI1ZSOSZYkZsSbdHEfwSaZzH0+zgBrWU08966lhAU9zH9P5JIc3NVJNYkayzPRyL54dAcUjzdkpTopPpUVyLj9jPg1bbKEG5vMzzm3Sz1NxUtjJIBWP4pGtlc5xcU4kcjw/ZWmbW2kpP+X4tHzmxOOUj+JRPLLlScvB8bFI5Exmkdrmdkoxiylp+TyWGGyqikfxyObZOfm55PrIRB7fDulskM/jTCSSXJ/8XNjZcBWP4pFWGLVL8neRQ/kRde3WVnXcQiWR+OCoXUxY8SgeaUHlsPh65DTmt3trzec0IvH1ymGmrHgUjzRjxKHJ1ZHLWJ+T5lrPfxFJrk5U5u0F7dRzf8WjeOSj3cSHJddGbmmHeZ3Nz/fcTCS5JjmqHVa319D/u0Wt9NxiO+8cdu35sV6VuxzX//ze1emn9rg87JG+1++sva9p9ru9iw4LIYTBPyseHUKfo3Y9pvkf2uf61v580cjQP/ugx4j1rf1OvymhW6+9exygeKQQtZOM6yK35bzFbiMS18XklpVRsTq9NN2LhI3Ohh703SH3bL14ik+KDPxS5sHuB79U+mbZ4oq1MVVeM/y1g/4y5Lf7zuh3VgghdC8pWxR6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" alt="mq-3"></p> <p>一般互联网类的企业，对于用户直接的操作，一般要求是每个请求都必须在 200 ms 以内完成，对用户几乎是无感知的。</p> <p>如果<strong>使用 MQ</strong>，那么 A 系统连续发送 3 条消息到 MQ 队列中，假如耗时 5ms，A 系统从接受一个请求到返回响应给用户，总时长是 3 + 5 = 8ms，对于用户而言，其实感觉上就是点个按钮，8ms 以后就直接返回了，爽！网站做得真好，真快！</p> <p><img src="/vdoingBlog/assets/img/mq-4.903a0eb3.png" alt="mq-4"></p> <h4 id="削峰"><a href="#削峰" class="header-anchor">#</a> 削峰</h4> <p>每天 0:00 到 12:00，A 系统风平浪静，每秒并发请求数量就 50 个。结果每次一到 12:00 ~ 13:00 ，每秒并发请求数量突然会暴增到 5k+ 条。但是系统是直接基于 MySQL 的，大量的请求涌入 MySQL，每秒钟对 MySQL 执行约 5k 条 SQL。</p> <p>一般的 MySQL，扛到每秒 2k 个请求就差不多了，如果每秒请求到 5k 的话，可能就直接把 MySQL 给打死了，导致系统崩溃，用户也就没法再使用系统了。</p> <p>但是高峰期一过，到了下午的时候，就成了低峰期，可能也就 1w 的用户同时在网站上操作，每秒中的请求数量可能也就 50 个请求，对整个系统几乎没有任何的压力。</p> <p><img src="data:image/png;base64,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" alt="mq-5"></p> <p>如果使用 MQ，每秒 5k 个请求写入 MQ，A 系统每秒钟最多处理 2k 个请求，因为 MySQL 每秒钟最多处理 2k 个。A 系统从 MQ 中慢慢拉取请求，每秒钟就拉取 2k 个请求，不要超过自己每秒能处理的最大请求数量就 ok，这样下来，哪怕是高峰期的时候，A 系统也绝对不会挂掉。而 MQ 每秒钟 5k 个请求进来，就 2k 个请求出去，结果就导致在中午高峰期（1 个小时），可能有几十万甚至几百万的请求积压在 MQ 中。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbsAAAGFCAQAAADOEJVIAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAB/pSURBVHja7d17XJR13v/xj4AMM5wPCiIgIMLAMIfrO6OgkmlaypplZ+yknbbVttrSbrfarPZurdat7WBmtXXXbifX7tyyrH7ub9UObq2m6JqaabWmiYCKgibC8L7/uOaIJ0BAhPfzejxkGAcZLq6X3+s4I0JERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERETtJMR5o1qhqhTafapSK5w3SghnMVGz6NTiDggucHqX4REFcd6ocDnWoA7trw5rcDkUtBs4n4kCqBUKa9BxvoSCWs75TBSYXZXqkJHOqxYKqorzmSgwOyh0LAUFzmciZkfE7IiYHbMjYnZEzI7ZETE7ImbH7IiYHRGzI2J2zI6I2dGZb3i0c5RzhjZPfaA2qh/VftWgGtR+9aPaqD7Q5jlnOEcNj2Z2zI7axcgwbYTzMbVOuU96IaZbrXM+po0YGcbsmB21mdOqzVPVelTDcD3mYAE+xTZUow4NaEAdqrENn2IB5uB6DPXmV63Nc1qZHbOj1uqlLlIf6xldgz9hMxpPumA0YjP+hGu88X2sLpJezI7ZUUuTG6dWKyiU4gVUtHoBqcALKNXTW63G9Yz0mB2dEm2A+lBBYRKWwd3mhcSNZSjT0/tQG8DsmB0dX4hzmrNOYSKWnkJy/vSWYiIUnHXOad39Va+YHbVRUYzzbwqD8Qzq221hqcdcuKCgFhXFnOBbR0hvZsfseiBXntqkcDE2t/sCsxkXQ0FtcuUd51sn2Cojbce4P9akkm7qP9u7YLf6R+odf5UkBN5hHCKJvk8MjrpjfVF8mfQ2pRoGMjvqcI7BzhqFOzvo1a/qcAcUnDWa61jfO/N1rdFaETylz+33kK1KuTPm97lFX0ENXOiMxd5jhRnz9c8k6uh/t99/K7c3Wl3aE+ZVEmUuN5eby/PXKei3+t0bHJDEhZsHvJj6MLOjjl1FKnYeUJjbDttzx9/OexoKzv3OoubfO2Vm3hcScYwnFSpir9Fvpj8uYQoSmr1I4rzZ+UM7dnbxE2xV0cNslTHjAu4My/04+R7viq1/MQ63+INXsO32f8bsqKOic6pahefQ0Z6DgqpVzqD1yEsLNsSMt+4IniI9B9v17Iz9Czbqo136H/s/1rLsYkrtNTFjRWLG6h/9K7QSIhI82mUt0FdJ/aOd57GtOPTB7KhVBqc4d3RGdN7wnDuKkgO+vUkSk27OeFkkuiTzNYkREbFsDs8XGfBS4XYFy1bL1sTJ6XM9K5kJtipj+vGy6z/busuQIyLS5zZHbdyF+t/GXeioTblfQkWS77ZsNn8Z6Wi+kmkul1AxFGzUv1Yh8RoRkeiS/LW+AJkdtaccg/pMYRaaOiW7JsyCgvapJTzwOWTMT/6ViEjKfSn3i4gUbjdmiIjEX6kvaAPfiyn1btsl3x13gXfbzl6T/YYkebPrc4utOqpQJCIr5wPrTuMQEUlSkCQRk7J8Z/km4TKJlpRj70YREek7I3+9RIgoWL6W8EibbU//33G0o45ZwZyjMLkdDxic/IDCtVBQc3xbdrOsFdphe03g7hTltlVaK0Sy39Lqc5ZEjch4QQye7GJTH5ReIhImJgkzaflrB76nZ5d4rX2fabC+HZj1qmf/pSc7EYlMfSThOhERPbuCTQUbvJNls3eVctDfjUNFFPK+yHzFVp0yi7tUqEM4i5T7rKbd6Ey7UdKk3K4h/mdh3y/JIjHjE6737FWtE4NIRGbOEnuNScv/t77qqSCS9Wr63KAtuJ9pDRJiLFaw7c6Y77nTf2Den51/j22diIjWGLTn0rcTx5Sa/baCsVirT3uSBxCoo1Ywv1J4G53tf6Hg3JBj8K7d6SlEOuz7Yy8REdEaREQyX0m4wl4TsGMjLPXhvJViCPwJ4i5y1OqjXdRIR23fac1+wONm59+qM5f7FubQ5NvtNRnPK0hc0s/tNSYXs6OOGOumK9zUgQcNjn8w4UYoOKd7dogMLdjg3fkRe66IGBwHRUT6TpdQ7wEEEUnKXpj7icR6HnlxRJaEGYssW9Ke8G7bxYzT6uOvPnl2kfbY847OLuqc/PUFG6KHefdkpj7iqNX/E2B21I4sUapS4WucDpuhoCptkSIiUSObHT6o0BqtO/rcFnAAIS31AVtl2qPi2xGT9nt7jdZY+J/UByXMvyczcbJ2xLv/8jjZhSu3/af4suYrmSal1afM0g8heA8gpMxU7szXj3lEkdlRW2kzFWbgdJkOBfVfzZ6SSWIlJOkXuR/7tvpqJHTQUntNxvOGQW34EY/KLvZcrTHpRt+2nUF6GwZq9SIihkEiYpLoSKtq8q7IRpe0fF8ms6OWbddVKWw5bdl9DQVVlRO0pWYssh9wHLJsiTrbe0/iNSIRWRLexh8y3rJV4oPDjj3Pv0sl7mLrD4Xf+k8CizpbQWvIeK5Ne4SZHbVgrLtUYSpOp6lQ0C7pYrMlpK0X5TI7akl27yssOa3ZvQ8F9V53mZ/Mjk4eXapyl+DQac3uEEqg3M5+zI7Z9ZTsblC4F6fbvVDQrmd2zK6nZPeawrunPbt3oKBeZXbMrmfopXYp7Dzt2e2AgtrVPV5ZjNnRSTjNCuNx+jXhZ1Bwmpkds+sJq5iXnM4D5c0Pmne5gwjMjjpkEblH4al2XSR+wtQ2rbQ+CQXn3cyO2fWE0e5lhUWtukZOYYRnUr6Pjc0CursNi9IiKKj/6fpzLMcwOKXt2a2HwpSgeyZBea5xrMZslKIIpXgMtcyuW492nyl82arsXJ5bjb6Fy5tdMcZ4ptGej8WtuKZhNRTUZ11/jg1OUU1quXarvX9bsxuOjQE/dYknu0qU4tf4HkewDXeg7IRHUpndmZ7dJoXv2ik7ddRbkqgWvEmJ17dQUBvPiOy8b6jyT+cMW1brs7sNswK2aG/1ZDcT03wvp+HGJMxldt14T+YPqlVvKFIPhVGeSfk+tkd2u6Cgtp9R2enTGnVv8B7Yk2X3CYqxFwCwE8VYCoV6/IQh+DzgcX/FBcyuG492+xT2d4nRbj8U1N4zMDt9+kr7rWbXjzueLLuDKMOLAIDHMRProVCPb6A8KepWwXWCFXRmd6Zn16BwpFVnTw49TnZHAsbBUc3GwZY4AgV15KTvEtu1p63qUdeQk2f3DkrRiEM4G+We7DZDYV/Qlq7rBK/gxux6WHb74PTtOFG+j40A9qHkqEf/uhW7VLpFdt84H3EMPnl29RiDpfgrrvbcU486uLAq4HELcSlXMrmS6fUfXHmc0W7DCReU7r6S6dygPahsLV3JBOZhGq7A+77sgOm4w/eoRpThBWbHXSpeK3HXcbJ7M2D/XFucsbtUvlT3BL9/UUuyq0IxzsWRgOwqMBYPYAcasAW3YhJ+YnY8gOA1Dy8fJ7vr8NEpZXcGHkBY6ZzelgMIBz2XOj3nu0c/XF6BWTgHCsPx1EnebYnZnenZtepweQPG+yJthEITGlAJF9xYjrGt2kY8ow+Xu9Vy9cu2HS4/ubUYjdnYiYYTzE9md4Zr3clh63Cz77Ybw9GIIjhxO4ANWH6K5xn2jJPDWmI37sMoDMFqZtdtR7tWngpde9QFO0fQPngqNE+F7jmjHS/8YXbU6XsyeZkrs6NO15Ve1OFHvqgDs+spq5l8CSNmR52eHV+wj9lRp2/d9ePL0zI76vzxji/Gzuyo07PjW48wO+psXeONtizhzI7Z9azxruu9rSSzY3bdnf4myptPS3SBb6LM7Jhdz9qfOV3hplZcC95e3LgRCs7p3WleMjtq+fbdVwpvd3p2/wsF54bgN1Bmdsyu54x3Rcp9VtPuTo1uN0qalNs1pHvNSWZHrVlc5ihc67nSuTPU41ooqDndbj4yO2rFjpVw7VOFWSd4obj2vebgPihon3afAwfMjtqkKNm5Q3le46OjPQcF546i5G641sDsqJWLjFPVdkZ486GgapWzW85DZketXmiKnQcUnu7AgwluPA0F535nUTedg8yOWk9zOWsU7jzJi8a1VR3ugIKzRnN12/+4mB21hStPbVK4uAPOW9mMi6CgNtpzu/H6ArOjNu5ciXH+TcGFue14QKEeT8MFBbWoKKZbr6YzO2qzEOdUZ53CRCxth+08N5ZiIhScdc6pEtLNt46ZHZ3SVt4A9aGCQhmWnUJ6bixDmf7y5R86M3rATilmR6eolxqrVisolOL5Vr1Jia4Cz6NUT26VGts9XhmM2VGnpOecqFbob7dxDV7Apha8WWQjNuEFXON9k44Vzok9IzlmR+3KVajNU9V6RkNxHebgTXyCbahCLRrQgFpUYRs+wZuYg+sw1BtctTbPVdiz5hSzo3Z1Wag6S/uDWqfcJ31fU7dap/1BnXVZaM+bS8yOOoQlyjXSOUObp5aojWqnqlENqkHVqJ1qo1qizXPOcI20RPXcucPsiJgdEbNjdkTMjojZMTsiZkfE7JgdEbMjYnZEzI7ZETE7ImbH7IjaIbsq1UEv/6SrhYKq4nwmCsxuhcKaDszuSyio5ZzPRAGcNypcji9R2yEj3Ze4HAraDZzPRIFC1OKTXo94atO7PedafaIWh6fdoJarqg4Irkot127o7q+9RtTx24LcL0nE7IiYHRExOyJmR0TMjojZERGzI2J2RMyOiJgdEbPrwiKkN3+f1L2zC5HYiCyTK2Zc4uTIMfpdfadLX/1W/JWpvw1+eNYC7ynU2W+c8snUKcd4zgm2ykjbMR4ba1JJN/Wf7f1pA/8qcbL3lsnpfeZEXSK76PMVkn/l+aRP/lrLFutO+wHltlUXbMz9JPvt9HnxV4qIhJutO8SgP8yQa6uOGhn8fbyXC2kN3uyMxQp5KwMflb9WQSL0tNLnFW7X6gu3pz8usSfPLvN1rdFaETylz+33kK1KuTPm97lF/57BX+eo896KGZ+3UsL129Ydqsm6w/PnrsLv9SnjKRERw6Dst+x7tcM5/z8iW3/+EsVliDogu+y3LFvN5d7PIm2GgdKn79TCb6POEREx9o/I1P9mwJ/63CpirbBW2Pfaa7yLfvT5IiISqjV6/oFeqsn7bxmLFRx1Jqf386izHbV6dqbUwu1ZbxpyJTy8YOA75nKJPHF2KTPzvvDkGixUxF6j30x/XMIUJDR7kcT5s4s+31HnqHPUOQ7qH0W8X+GoE0m4XM8tflLakyIifWf0uUXiJTlnSd5KZkcdl12CVh8zVrkjHd47wgtyPsx4ThJFRBKvtf6Y9AsRkYhsyzdiSL5bkkQGvGgulzARCfP9K5G+kcWk3N5xz1isMPC9jJd9gb+ds0TPLmtBzke+i2lD89f2/53+XO019hp7jX2/95aj1rJVJPbSgg0x4607gqdIq/7lekTG/gUb9dEu/Y/9HxMp/L7we9VU+H3U2Uf/yP7sjEUD/yYikvpIwvXejEVEIseoJglldtRB2fX5pblcZNDStCc8Y8ZcrTFv+YC/DHwv77PCb3M+MuR6k4m/2jS44CvpHTXSfiDSJiJJ5lW+nRzJNs/LHplSFSKy/dnFjNcOSx8RkYhM7XDspQoSISbtSOy5/ufQd5plq2cVMSp4tIt0WLaKiEkSk27OeFkkuiTzNYkREbFsDs8XGfBS4XYFy1bL1sTJ6XM9K5kJtipjun8lM/aS6BL9/5O0J/RRVbkLNhRsUG4RibV8IyKStzwq6M2446+yVvhHu/6zrbsMOVyWqN2yM6/uO10k8RpbpZ5Q9FlxF0WXRI3MXpi/Ln5C9Fme0SLE+oNli9YYPUySLd/FTxCRXmLMWZxyl2eEzFdIuV9ExDhEIb7Mn51EmcuT7xER6f+HrAXGYgWJiLQq6Cl6Vj5HKbeEnCA7EcmYr29/ptynf5/C7cYMfeeO/tiB78WUerftku+Ou8CfXcpd+n8pxiJrRfPRTqRgoySLqXB70AtZ9DavTn3Q+/z73GKrDo6S6JSyiypUbumnryTGTfTE0j/tCfPq+KslRCTSavkm6WbvuJg2R2TAn/PX2qrsB2x7FPLX26olSUQkZlzupwWbkn4u0nea5bsBLwVml3Cd9QcJk0j7vuhhnuwcCvrXeZ7FSK1Reh0/u5RZ1grtsH970lphrVBuW6W1QiT7La0+Z0nUiIwXxODJLjb1QQkx5MRdoDUM+nv6H41DzWtERJLvyHzNM0/8o51kPJV0U8JlA14MnCsZL+R9IQb9+Sdea99nGszliNoxu/5/UE36VpTWqG/lZC3QGu01OR/krjCvtmy2/mCrchxMe1R6xZRatsSemzhFokW0egkV0RpFjMX61lDqg2mPGgbaKmNKBy1NuM66S0z+7MRg2x17ad9p5lWeeyIkRmuMGhWwkjm14KsTbduJiNj3S7JIzHjPNpg46sQgEpGZs8ReY9Ly/62veiqIZL2aPleMhd9mL9IOG4slTAz2nyRSJHtR4pSjRztjsXlN7grPaqg+Tx6zfK0fbjAWK9h2Z8znUkTtmV2YdVfy7RGZEZkRmfGTtCPSRyR+QsIVseeZXIY8rVGipbeIKTVvpSSnzxv4ftqTfe+U3sYM604RPTv/qmrkaJGYcSn326rEmPVm3zsDspPU3+Z8lL8u/mpfdpL99sB3/M/CXN7vNyIi5s/FGDzaGQZlL9TL1COJdNj3x14iIqI1iIhkvpJwhb1GxLeKGJb6cN5K72EO724e85rosyTEtkdSgrOLGhEzXiT3k9xPA6KbXbBJ+vlH66iRjtq+07gcUbtlF32+dsS7s13CbJX61lPcBbn/lBA9q34PZb7iXYglOnp4n1siBqTclf2WN7v4CYnXipgGW3dKqIiE5K5ImSliUva9xoyAHfD9tMPWXRLuz86Ybt054KWILOkdactZkr9WHx19jjqAYBxasEG/FXdh7LkiYnAcFBHpO11CvQcQRCQpe2HuJ/6jgN7sBrzU55emwebVIiIS2+cW7UjO/7PuVE3Zi/reaRhk/bHwP5KsPzL1gYKvvLe9zz9mnFYffzWXJGqn7LLfylni/yz9GXO5SPwE+97I0b7RLC73H3mfSZKEmsvNq9KfSZwSf5V9v3GIZ7wJS7kr+VfSK295n1tFRNIfN/9L3zGT/kz+eunj3wGf9apnh0ux93C5MS3jZVuVgqMu9RF9BfFE2UWNbHb4oEJrtO7oc5t/7DKmpT5gq0x71HtQPDA7MYmkPpD6gIiIJKY9mTjFpEm4o04k3Fy4PXFK3+nmVRLvnVveSSK8zz9xsnYk7kIuS9RuezKDJdxgq4wuEaNEST/HIX2vXvYbli3GDD2nzFesO7y7/nMW2yqtFeEFSTflr5VwkfSnLduM/T3/kCH3H/lrT36SWHSJrTLj2YhM6R2YyzFPDhNfQrESkvSL3I+9d9hrJHTQUntNxvOGQYE/iiTZ94l4DpbXaQ3aYUedo07fq6pHmXitvSb5DhGRAX+2bNEPOhB1enb9fxdeIGIabD9g35v2e8+dIX1neA8aGwYe41yReP3YXvyVptSAew3hBS35jsb+A/5sq9aOBJ1qFnP83RjGIvsBxyHLFv9h8MRrRCKygrIVEctWx6H0uSf6zvnrUh/wHuqQsOTb+bK8dJqyIyJmR8TsiOjMza53/FWSELTNNkQ/+VrfLvRfshO0EVkmvU2phoH8rVKXZEtT8z0TFLy3bWld5fn1+2/l9l6aqkt7wrxKoszl5nJzef46Bf1Wv3uD/wuRuHDzgBdTH+ZvmLqgy0K1iuZvo6VVXBbaNZ5d/ARbVfQwW2XMuIA7w3I/9u3cj/CP0OGWgPMwYdvt/4y/ZepynM8eld28rvHMYkrtNTFjRWLG6h99EiREJHi0y1qgr5L6RzvPY/nGl9QVaWOOym50V3hefW5z1HrP+Ii70FGbcr+EiiTfbdls/jLS0Xwl01wuoWIo2Khf7aaQeI2ISHRJ/lpfgERdaLTrre0Jyq56ZNjpfk4RWTkfWHcah4hIkn7pj0lZvrN8k3CZREvKsXejiIj0nZG/XiJEFCxfS3ikzbZHvxqdqMtRLwVl9+Lpf0bpj2e96tl/meS74i4y9ZGE60R8l51uKtjgnSybvauUg/5uHCqikPdF5iu26pRZ/O1SVx3vxgdm5/pZF3hK/tOvkoIvdPVnF3g5UcChj1BTavbbCsZirV5/sSGiLinHoPb7stufY+hST+642fm36szlvuxCk2+312Q8ryBxST+315hc/O1S192t8povu1e72FM7ZnaR9tjzjs4u6pz89QUbood592SmPuKo1S91JeqKW3cX+7K7qMtnF67c9p/iy5qvZJqUVp8ySz+E4D2AkDJTuTNfP+brZhKd9q07kzqooKAOOk1dPbvYc7XGpBt923YG6W0YqNWLiBgGiYhJoiOtqsl7pXt0CfdlUtcd795SUHAu7HJPLN6yVb+e28cUe56IN7u4i60/FH7rPwks6mwFrSHjOf5G6UzYupukoKCVdYMfJYRnptAZoihGQWF4NOcEUWeuZi5W73IuEHVudlOckzkXiPxbXl80P135TJ20Zfxt0pkyEqH7TPxt0hmUXXfA7IjZMTsiZkfE7JgdMTtmR8TsmB0xO2ZHxOyYHTE7ZkfE7IiYHbMjYnZEzI7ZEbNjdkTMjtkRs2N2RMyO2RGzY3ZEzI6I2TE7YnbMjojZMTtidsyOiNkxO2J2zI6I2RExO2ZHxOyIunN2btRiB77CZ1iMzz33/QV7PLc+wDxmR8yu7T6Gwmue23sxCRMxFiVwYRQuwfWYjtn4AADwHcah3vO47zEKq5kdMbu2ugsXoMz32Rb8gL1YiAn4FwBgN3Z6/ua3eAPAGIzBSIzAGM/0MbMjZtda+1GElXBhs++ebbgFD6EGALAY52EhAGAHLkQ9XsI+AA+iDI0AGjnaEbNrizdRBmAq5ng+fwQu3ITf4DZchwmYhu8990/H+9iAS9GA1SjBFgD7cDUamB0xu9a7Cn8B8B5GexJag39gLVbjv3AFVmCNZwvOjVJMhAvl2IPzsQJAEw7jdrzC7IjZtdZWuFAF4BCGY5nnvt2Yg6vwPtwAvsGFeMs3Lv4RwH2YhHNQgpFQuByjsI/ZEbNrncfhxAiMwAi4cCcAYCZcGIFf4kZchYtQinMwDE+iCZ9iIj7HuzgIoAhuAC4A6+FmdsTsWqMR5+J17MRO7MQHGIK9AFbgI/wTX+F7uHAQDQAqMQV7MBu34vf4CxqwC2MBT3bcpULMrtVH7IbggC/B0Z6jd8sx2TeaPYNZvmN1B1GOBfgRr+AuX3YrsJjZEbNr3RG7WwM+exhlAFZgJL7wZXUAP8d12Ac3ynA1Hsa7WIKzsAEAMBiNeMV3oJ3ZEbNro0UYjbU4jIOowlAAQAPuxkTs8uznnIVxvlPFbsdojME2ZkfM7tTMxTYAG1CCkXjCd3bmn3HQc/sH3yonT4UmZscrEIiYHbMjZsfsiJgdsyNmx+yImB0Rs2N2RMyOiNkxO2J2zI6I2TE7YnbMjojZETE7ZkfE7IiYHbMjZsfsiJgdsyNmx+yImB2zI2bH7IiYHRGzY3ZEzI6I2TE7YnbMjojZMTvqTtl1l4m/TTpDaMu6S3TaF/xtEgWNqJwLRMyOiNkREbMjYnZExOyImB0RMTsiZkfE7IiI2RExOyJidkTMjoiYHRGzI2J2zI6I2RExOyJidkTMjoiYHRGzIyJmR8TsiJgdEXUMW5qa75mg4L1tS+OcIeowl4VqFUe9T0HFZaGcM0QdyPnsUdnN41wh6lDamKOyG825QtSxo11vbU9QdtUjwzhXiDqYeikouxc5R4g6frwbH5id62ecI0QdLseg9vuy259j4Bwh6gTaa77sXuXcIOqcrbuLfdldxLlB1DlbdyZ1UEFBHXSaODeIOmu8e0tBwbmQc4Ko87buJikoaGWcE0SdpihGQWF4NOcEUWeuZi5W73IuEHVudlOckzkXqO3bKV80P7mXE6eOm7RlbE7066Q5ceq8ic15siPqHMyO2RGzY3bE7JgdEbNjdsTsmB0Rs2N2xOyYHRGzY3bE7JgdMTtmR8TsmB0xO2ZHxOyYHTE7ZkfE7JgdMTtm1/Wth8KUoHsmQaH+GI86CKACv8FouDACz3r+phqzUYoilOIx1AY9lpgdsztBdsOx0ff5apQcN7sGTMDjqEYDvsWnAIBKlOLX+B5HsA13oAyHmB2zY3Yty+42zPJ9Ph23HiO7f8OFQ9gMhT1B98/ENDR5brsxCXOZHbNjdi3L7hMUYy8AYCeKsRQKFSjyjGc/4Sys9Dx2P4bh/oCkfsIQfB7wb/0VFzA7ZsfsWpbdQZThRQDA45iJ9VCox69xDwDgPUzwjWfAJxiF0XjRk9U3UJ5cdavggpvZMTtm17Ls3kEpGnEIZ6Pck91qDMNBADfjf4IefwDP4myU4msAm6GwL+DvVsOFJmbH7Jhdy7KrxxgsxV9xteeeegCXYDF+9K1+BtqPqbgEQB1cWBVw/0JcypVMZsfsWpodMA/TcAXeD8juDfwCz3tWNZv7F5xwA5iOO3z3NaIMLzA7ZsfsWp5dFYpxLo4EZHcAJRiPLwMeuwXP4z9oRDXuxlQAQAXG4gHsQAO24FZMwk+er9+BalQ32+vJ7Jgds2uWHXAvnvPdox9AuA+XBj22AjdjJFwYi4dQ47tvFs6BwnA8hTrf1+vTcM5eZsfsWusKvNHCR67FaMzGTjTgCGcbs2N2bVWDBRjTim203bgPozAEqznrmB2za6tiTMR6zgZmx+yI2TE7ImbH7IjZMTsiZsfsiNkxO2J2zI6I2TE7YnbMjojZMTtidsyOiNkxO2J2zI6YHbPj0kDMrvOz48Sp8yY2JyLaMi4InDpv0paxOSIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiLqUf4PYipyJ/B5Y+MAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMTItMjVUMTU6Mzg6NTgrMDA6MDANlj06AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTEyLTI1VDE1OjM4OjU4KzAwOjAwfMuFhgAAAABJRU5ErkJggg==" alt="mq-6"></p> <p>这个短暂的高峰期积压是 ok 的，因为高峰期过了之后，每秒钟就 50 个请求进 MQ，但是 A 系统依然会按照每秒 2k 个请求的速度在处理。所以说，只要高峰期一过，A 系统就会快速将积压的消息给解决掉。</p> <h3 id="消息队列有什么优缺点"><a href="#消息队列有什么优缺点" class="header-anchor">#</a> 消息队列有什么优缺点</h3> <p>优点上面已经说了，就是<strong>在特殊场景下有其对应的好处</strong>，<strong>解耦</strong>、<strong>异步</strong>、<strong>削峰</strong>。</p> <p>缺点有以下几个：</p> <ul><li><p>系统可用性降低</p> <p>系统引入的外部依赖越多，越容易挂掉。本来你就是 A 系统调用 BCD 三个系统的接口就好了，ABCD 四个系统还好好的，没啥问题，你偏加个 MQ 进来，万一 MQ 挂了咋整？MQ 一挂，整套系统崩溃，你不就完了？如何保证消息队列的高可用，可以<a href="/vdoingBlog/docs/high-concurrency/how-to-ensure-high-availability-of-message-queues.html">点击这里查看</a>。</p></li> <li><p>系统复杂度提高</p> <p>硬生生加个 MQ 进来，你怎么<a href="/vdoingBlog/docs/high-concurrency/how-to-ensure-that-messages-are-not-repeatedly-consumed.html">保证消息没有重复消费</a>？怎么<a href="/vdoingBlog/docs/high-concurrency/how-to-ensure-the-reliable-transmission-of-messages.html">处理消息丢失的情况</a>？怎么保证消息传递的顺序性？头大头大，问题一大堆，痛苦不已。</p></li> <li><p>一致性问题</p> <p>A 系统处理完了直接返回成功了，人都以为你这个请求就成功了；但是问题是，要是 BCD 三个系统那里，BD 两个系统写库成功了，结果 C 系统写库失败了，咋整？你这数据就不一致了。</p> <p>所以消息队列实际是一种非常复杂的架构，你引入它有很多好处，但是也得针对它带来的坏处做各种额外的技术方案和架构来规避掉，做好之后，你会发现，妈呀，系统复杂度提升了一个数量级，也许是复杂了 10 倍。但是关键时刻，用，还是得用的。</p></li></ul> <h3 id="kafka、activemq、rabbitmq、rocketmq-有什么优缺点？"><a href="#kafka、activemq、rabbitmq、rocketmq-有什么优缺点？" class="header-anchor">#</a> Kafka、ActiveMQ、RabbitMQ、RocketMQ 有什么优缺点？</h3> <table><thead><tr><th>特性</th> <th>ActiveMQ</th> <th>RabbitMQ</th> <th>RocketMQ</th> <th>Kafka</th></tr></thead> <tbody><tr><td>单机吞吐量</td> <td>万级，比 RocketMQ、Kafka 低一个数量级</td> <td>同 ActiveMQ</td> <td>10 万级，支撑高吞吐</td> <td>10 万级，高吞吐，一般配合大数据类的系统来进行实时数据计算、日志采集等场景</td></tr> <tr><td>topic 数量对吞吐量的影响</td> <td></td> <td></td> <td>topic 可以达到几百/几千的级别，吞吐量会有较小幅度的下降，这是 RocketMQ 的一大优势，在同等机器下，可以支撑大量的 topic</td> <td>topic 从几十到几百个时候，吞吐量会大幅度下降，在同等机器下，Kafka 尽量保证 topic 数量不要过多，如果要支撑大规模的 topic，需要增加更多的机器资源</td></tr> <tr><td>时效性</td> <td>ms 级</td> <td>微秒级，这是 RabbitMQ 的一大特点，延迟最低</td> <td>ms 级</td> <td>延迟在 ms 级以内</td></tr> <tr><td>可用性</td> <td>高，基于主从架构实现高可用</td> <td>同 ActiveMQ</td> <td>非常高，分布式架构</td> <td>非常高，分布式，一个数据多个副本，少数机器宕机，不会丢失数据，不会导致不可用</td></tr> <tr><td>消息可靠性</td> <td>有较低的概率丢失数据</td> <td>基本不丢</td> <td>经过参数优化配置，可以做到 0 丢失</td> <td>同 RocketMQ</td></tr> <tr><td>功能支持</td> <td>MQ 领域的功能极其完备</td> <td>基于 erlang 开发，并发能力很强，性能极好，延时很低</td> <td>MQ 功能较为完善，还是分布式的，扩展性好</td> <td>功能较为简单，主要支持简单的 MQ 功能，在大数据领域的实时计算以及日志采集被大规模使用</td></tr></tbody></table> <p>综上，各种对比之后，有如下建议：</p> <p>一般的业务系统要引入 MQ，最早大家都用 ActiveMQ，但是现在确实大家用的不多了，没经过大规模吞吐量场景的验证，社区也不是很活跃，所以大家还是算了吧，我个人不推荐用这个了。</p> <p>后来大家开始用 RabbitMQ，但是确实 erlang 语言阻止了大量的 Java 工程师去深入研究和掌控它，对公司而言，几乎处于不可控的状态，但是确实人家是开源的，比较稳定的支持，活跃度也高。</p> <p>不过现在确实越来越多的公司会去用 RocketMQ，确实很不错，毕竟是阿里出品，但社区可能有突然黄掉的风险（目前 RocketMQ 已捐给 <a href="https://github.com/apache/rocketmq" target="_blank" rel="noopener noreferrer">Apache<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，但 GitHub 上的活跃度其实不算高）对自己公司技术实力有绝对自信的，推荐用 RocketMQ，否则回去老老实实用 RabbitMQ 吧，人家有活跃的开源社区，绝对不会黄。</p> <p>所以<strong>中小型公司</strong>，技术实力较为一般，技术挑战不是特别高，用 RabbitMQ 是不错的选择；<strong>大型公司</strong>，基础架构研发实力较强，用 RocketMQ 是很好的选择。</p> <p>如果是<strong>大数据领域</strong>的实时计算、日志采集等场景，用 Kafka 是业内标准的，绝对没问题，社区活跃度很高，绝对不会黄，何况几乎是全世界这个领域的事实性规范。</p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/pasregret/vdoingBlog/edit/master/docs/02.后端/high-concurrency/why-mq.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/03/26, 9:03:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/vdoingBlog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/vdoingBlog/pages/bc52b9/"><div>database-shard-dynamic-expand</div></a> <span>03-26</span></dt></dl><dl><dd>02</dd> <dt><a href="/vdoingBlog/pages/7d465c/"><div>README</div></a> <span>03-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/vdoingBlog/pages/b3459f/"><div>database-shard-global-id-generate</div></a> <span>03-26</span></dt></dl> <dl><dd></dd> <dt><a href="/vdoingBlog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="https://msg.cnblogs.com/send/pasregret" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://blog.csdn.net/qq_17589751?type=blog" title="CSDN" target="_blank" class="iconfont icon-csdn"></a><a href="https://github.com/pasregret" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=2507037283" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2019-2024
    <span>時念 | <a href="https://github.com/pasregret/vdoingBlog/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/vdoingBlog/assets/js/app.b9445f3d.js" defer></script><script src="/vdoingBlog/assets/js/2.6f6622d0.js" defer></script><script src="/vdoingBlog/assets/js/3.2637abc7.js" defer></script><script src="/vdoingBlog/assets/js/4.a491a05d.js" defer></script>
  </body>
</html>